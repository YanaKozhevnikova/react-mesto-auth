{"version":3,"sources":["utils/api.js","contexts/CurrentUserContext.js","images/logo.svg","components/Header.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ProtectedRoute.js","components/Login.js","components/Register.js","images/success.svg","images/error.svg","components/InfoTooltip.js","components/App.js","reportWebVitals.js","index.js"],"names":["api","baseUrl","token","authUrl","this","_baseUrl","_token","_authUrl","res","ok","json","Promise","reject","status","statusText","fetch","headers","authorization","then","_checkResponse","info","method","body","JSON","stringify","name","link","card","_cardId","_id","isLiked","avatar","email","password","CurrentUserContext","React","createContext","Header","loggedIn","onSignOut","location","useLocation","className","src","logoPath","alt","onClick","type","to","pathname","Card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","likes","some","like","cardLikeButtonClassName","aria-label","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","about","map","Footer","ImagePopup","onClose","PopupWithForm","title","submit","isOpen","onSubmit","children","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","e","preventDefault","value","onChange","target","required","minLength","maxLength","placeholder","id","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","reset","ref","AddPlacePopup","setLink","ProtectedRoute","Component","component","props","Login","onLogin","setEmail","setPassword","Register","onRegister","InfoTooltip","isSuccessful","successImagePath","errorImagePath","App","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isTooltipOpen","setTooltipOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","setSuccessful","history","useHistory","closeAllPopups","localStorage","getItem","checkToken","data","push","catch","err","console","log","getInitialCards","getUserInfo","userInfo","Provider","removeItem","exact","path","changeLikeCardStatus","newCard","state","c","deleteCard","filter","login","setItem","register","setUserInfo","changeAvatar","postCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.353424e0.chunk.js","sourcesContent":["class Api {\n  constructor(baseUrl, token, authUrl) {\n    this._baseUrl = baseUrl;\n    this._token = token;\n    this._authUrl = authUrl;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n       return Promise.reject(`Ошибка: ${res.status} ${res.statusText}`);\n    }\n  }\n\n  getInitialCards() {\n    return fetch(`${this._baseUrl}cards`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n    .then(this._checkResponse)\n  }\n\n  getUserInfo() {\n    return fetch(`${this._baseUrl}users/me`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n    .then(this._checkResponse)\n  }\n\n  setUserInfo(info) {\n    return fetch(`${this._baseUrl}users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(info)\n      })\n    .then(this._checkResponse)\n  }\n\n  postCard({name, link}) {\n    return fetch(`${this._baseUrl}cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({name: name, link: link})\n    })\n    .then(this._checkResponse)\n  }\n\n  deleteCard(card) {\n    this._cardId = card._id;\n    return fetch(`${this._baseUrl}cards/${this._cardId}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token,\n      },\n    })\n    .then(this._checkResponse)\n  }\n\n  changeLikeCardStatus(card, isLiked) {\n    this._cardId = card._id;\n    return fetch(`${this._baseUrl}cards/likes/${this._cardId}`, {\n      method: isLiked ? 'DELETE' : 'PUT',\n      headers: {\n        authorization: this._token,\n      },\n    })\n    .then(this._checkResponse)\n  }\n\n  changeAvatar(avatar) {\n    return fetch(`${this._baseUrl}users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({avatar})\n      })\n    .then(this._checkResponse)\n  }\n\n  login(email, password) {\n    return fetch(`${this._authUrl}signin`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\"password\": password, \"email\": email})\n    })\n    .then(this._checkResponse)\n  }\n\n  register(email, password) {\n    return fetch(`${this._authUrl}signup`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\"password\": password, \"email\": email})\n    })\n    .then(this._checkResponse)\n  }\n\n  checkToken(token) {\n    return fetch(`${this._authUrl}users/me`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization' : `Bearer ${token}`\n      },\n    })\n    .then(this._checkResponse)\n  }\n}\n\nconst api = new Api('https://mesto.nomoreparties.co/v1/cohort-24/', '0c664d7d-5920-42ff-9591-f94b8c7db340', 'https://auth.nomoreparties.co/')\nexport default api;\n","import React from 'react';\nexport const CurrentUserContext = React.createContext();\n","export default __webpack_public_path__ + \"static/media/logo.03b78ada.svg\";","import { Link, useLocation } from 'react-router-dom';\nimport logoPath from '../images/logo.svg';\n\nfunction Header({loggedIn, email, onSignOut}) {\n  const location = useLocation();\n  return (\n    <header className=\"header\">\n      <img src={logoPath} alt=\"Место\" className=\"header__logo\" />\n      {loggedIn ? (\n        <div className=\"header__container\">\n          <p className=\"header__user-info\">{email}</p>\n          <button onClick={onSignOut} className=\"header__link\" type=\"button\">Выйти</button>\n        </div>\n      ) : (\n        <Link className=\"header__link\" to={(location.pathname === '/signup') ? '/signin' : '/signup'}>\n          {`${(location.pathname === '/signup') ? 'Войти' : 'Регистрация'}`}\n        </Link>\n      )}\n    </header>\n  )\n}\n\nexport default Header;\n","import React from 'react';\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const isOwn = card.owner._id === currentUser._id;\n  const isLiked = card.likes.some(like => like._id === currentUser._id);\n  const cardLikeButtonClassName = `element__like-button ${isLiked && 'element__like-button_active'}`;\n\n  function handleClick() {\n    onCardClick(card);\n  }\n\n  function handleLikeClick() {\n    onCardLike(card);\n  }\n\n  function handleDeleteClick() {\n    onCardDelete(card);\n  }\n\n  return (\n    <li className=\"element\">\n      <img className=\"element__image\" src={card.link} alt={card.name} onClick={handleClick} />\n      {isOwn && (\n        <button type=\"button\" className=\"element__delete-button\" onClick={handleDeleteClick} aria-label=\"Удалить\"></button>\n      )}\n      <div className=\"element__content\">\n        <h2 className=\"element__heading\">{card.name}</h2>\n        <div className=\"element__like\">\n          <button type=\"button\" className={cardLikeButtonClassName} onClick={handleLikeClick} aria-label=\"Нравится\"></button>\n          <p className=\"element__like-count\">{card.likes.length}</p>\n        </div>\n      </div>\n    </li>\n  )\n}\n\nexport default Card;\n","import React from 'react';\nimport Card from './Card';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Main({ onEditProfile, onAddPlace, onEditAvatar, onCardClick, cards, onCardLike, onCardDelete }) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <main>\n      <section className=\"profile\">\n        <div className=\"profile__picture-container\">\n          <img src={currentUser.avatar} alt=\"Фото профиля\" className=\"profile__picture\" />\n          <button type=\"button\" className=\"profile__button profile__button_type_edit-picture\" aria-label=\"Изменить фото\" onClick={onEditAvatar}></button>\n        </div>\n        <div className=\"profile__info\">\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\n          <button type=\"button\" className=\"profile__button profile__button_type_edit\" aria-label=\"Изменить\" onClick={onEditProfile}></button>\n          <p className=\"profile__about\">{currentUser.about}</p>\n        </div>\n        <button type=\"button\" className=\"profile__button profile__button_type_add\" aria-label=\"Добавить\" onClick={onAddPlace}></button>\n      </section>\n      <ul className=\"elements\">\n        {cards.map((card) => (\n          <Card key={card._id}\n            card={card}\n            onCardClick={onCardClick}\n            onCardLike={onCardLike}\n            onCardDelete={onCardDelete}\n          />\n        ))}\n      </ul>\n    </main>\n  )\n}\n\nexport default Main;\n","function Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">&copy; 2021 Mesto Russia</p>\n    </footer>\n  )\n}\n\nexport default Footer;\n","function ImagePopup({card, onClose}) {\n  return (\n    <div className={`popup popup_type_image ${card.link.length > 0 && 'popup_opened'}`}>\n      <div className=\"popup__image-container\">\n        <button type=\"button\" className=\"popup__close-button\" aria-label=\"Закрыть\" onClick={onClose}></button>\n        <img className=\"popup__image\" src={card.link} alt={card.name} />\n        <h2 className=\"popup__image-heading\">{card.name}</h2>\n      </div>\n    </div>\n  )\n}\n\nexport default ImagePopup;\n","function PopupWithForm({name, title, submit, isOpen, onClose, onSubmit, children}) {\n  return (\n    <div className={`popup popup_type_${name} ${isOpen && 'popup_opened'}`}>\n      <div className=\"popup__container\">\n        <button type=\"button\" className=\"popup__close-button\" aria-label=\"Закрыть\" onClick={onClose}></button>\n        <h2 className=\"popup__heading\">{title}</h2>\n        <form name={name} className=\"form\" onSubmit={onSubmit}>\n          {children}\n          <button type=\"submit\" className=\"form__save-button\">{submit}</button>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default PopupWithForm;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser}) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser, isOpen])\n\n  function handleNameChange(e) {\n    setName(e.target.value);\n  }\n\n  function handleDescriptionChange(e) {\n    setDescription(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  return (\n    <PopupWithForm\n    name=\"profile\"\n    title=\"Редактировать профиль\"\n    submit=\"Сохранить\"\n    isOpen={isOpen}\n    onClose={onClose}\n    onSubmit={handleSubmit}\n    >\n      <input value={name} onChange={handleNameChange} type=\"text\" required minLength=\"2\" maxLength=\"40\" placeholder=\"Имя\" name=\"name\" id=\"name-input\" className=\"form__input form__input_type_name\" />\n      <span className=\"form__input-error name-input-error\"></span>\n      <input value={description} onChange={handleDescriptionChange} type=\"text\" required minLength=\"2\" maxLength=\"200\" placeholder=\"О себе\" name=\"about\" id=\"about-input\" className=\"form__input form__input_type_about\" />\n      <span className=\"form__input-error about-input-error\"></span>\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar}) {\n  const avatarRef = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar(avatarRef.current.value);\n    e.target.reset();\n  }\n\n  function handleClose() {\n    onClose();\n    avatarRef.current.value = '';\n  }\n\n\n\n  return (\n    <PopupWithForm\n      name=\"avatar\"\n      title=\"Обновить аватар\"\n      submit=\"Сохранить\"\n      isOpen={isOpen}\n      onClose={handleClose}\n      onSubmit={handleSubmit}\n      >\n        <input ref={avatarRef} type=\"url\" required placeholder=\"Ссылка на фото\" name=\"avatar\" id=\"avatar-input\" className=\"form__input form__input_type_avatar\" />\n        <span className=\"form__input-error avatar-input-error\"></span>\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction AddPlacePopup({isOpen, onClose, onAddPlace}) {\n  const [name, setName] = React.useState('');\n  const [link, setLink] = React.useState('');\n\n  React.useEffect(() => {\n    setName('');\n    setLink('')\n  }, [isOpen])\n\n  function handleNameChange(e) {\n    setName(e.target.value);\n  }\n\n  function handleLinkChange(e) {\n    setLink(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onAddPlace({\n      name: name,\n      link: link,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name=\"place\"\n      title=\"Новое место\"\n      submit=\"Сохранить\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      >\n        <input value={name} onChange={handleNameChange} type=\"text\" required minLength=\"2\" maxLength=\"30\" placeholder=\"Название\" name=\"placename\" id=\"place-name-input\" className=\"form__input form__input_type_place-name\" />\n        <span className=\"form__input-error place-name-input-error\"></span>\n        <input value={link} onChange={handleLinkChange} type=\"url\" required placeholder=\"Ссылка на картинку\" name=\"link\" id=\"place-link-input\" className=\"form__input form__input_type_place-link\" />\n        <span className=\"form__input-error place-link-input-error\"></span>\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup;\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n  return (\n    <Route>\n      {() =>\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"./signin\" />\n      }\n    </Route>\n  );\n};\n\nexport default ProtectedRoute;\n","import React from 'react';\n\n\nfunction Login({ onLogin }) {\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n\n  function handleEmailChange(e) {\n    setEmail(e.target.value);\n  }\n\n  function handlePasswordChange(e) {\n    setPassword(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onLogin(email, password);\n    setEmail('');\n    setPassword('');\n  }\n\n  return (\n    <div className=\"auth\">\n      <h1 className=\"auth__heading\">Вход</h1>\n      <form onSubmit={handleSubmit} name=\"signin\" className=\"form\">\n        <input value={email} onChange={handleEmailChange} type=\"email\" required placeholder=\"Email\" name=\"email\" id=\"email-input\" className=\"form__input form__input_type_auth\" />\n        <span className=\"form__input-error name-input-error\"></span>\n        <input value={password} onChange={handlePasswordChange} type=\"password\" required minLength=\"2\" maxLength=\"40\" placeholder=\"Пароль\" name=\"password\" id=\"password-input\" className=\"form__input form__input_type_auth\" />\n        <span className=\"form__input-error about-input-error\"></span>\n        <button type=\"submit\" className=\"form__save-button form__save-button_type_auth\">Войти</button>\n      </form>\n    </div>\n  )\n}\n\nexport default Login;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Register({ onRegister }) {\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n\n  function handleEmailChange(e) {\n    setEmail(e.target.value);\n  }\n\n  function handlePasswordChange(e) {\n    setPassword(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onRegister(email, password);\n  }\n\n  return (\n    <div className=\"auth\">\n      <h1 className=\"auth__heading\">Регистрация</h1>\n      <form onSubmit={handleSubmit} name=\"signup\" className=\"form\">\n        <input value={email} onChange={handleEmailChange} type=\"email\" required placeholder=\"Email\" name=\"email\" id=\"email-input\" className=\"form__input form__input_type_auth\" />\n        <span className=\"form__input-error name-input-error\"></span>\n        <input value={password} onChange={handlePasswordChange} type=\"password\" required minLength=\"2\" maxLength=\"40\" placeholder=\"Пароль\" name=\"password\" id=\"password-input\" className=\"form__input form__input_type_auth\" />\n        <span className=\"form__input-error about-input-error\"></span>\n        <button type=\"submit\" className=\"form__save-button form__save-button_type_auth\">Зарегистрироваться</button>\n      </form>\n      <p className=\"auth__text\">Уже зарегистрированы? <Link to=\"/signin\" className=\"auth__link\">Войти</Link></p>\n    </div>\n  )\n}\n\nexport default Register;\n","export default __webpack_public_path__ + \"static/media/success.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/error.df8eddf6.svg\";","import successImagePath from \"../images/success.svg\";\nimport errorImagePath from \"../images/error.svg\";\n\nfunction InfoTooltip({isOpen, isSuccessful, onClose}) {\n  return (\n    <div className={`popup ${isOpen && 'popup_opened'}`}>\n      <div className=\"popup__container\">\n        <button type=\"button\" className=\"popup__close-button\" aria-label=\"Закрыть\" onClick={onClose}></button>\n        <img src={isSuccessful ? successImagePath : errorImagePath} className=\"popup__status-image\" alt={isSuccessful ? 'Удача' : 'Ошибка'}></img>\n        <h2 className=\"popup__heading popup__heading_type_tooltip\">{isSuccessful ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}</h2>\n      </div>\n    </div>\n  )\n}\n\nexport default InfoTooltip;\n","import React from \"react\";\nimport { Redirect, Route, Switch, useHistory } from 'react-router-dom';\nimport api from \"../utils/api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport ImagePopup from \"./ImagePopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport InfoTooltip from \"./InfoTooltip\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  const [isTooltipOpen, setTooltipOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({name: '', link: ''});\n  const [currentUser, setCurrentUser] = React.useState({name: '', about: '', avatar: ''});\n  const [cards, setCards] = React.useState([]);\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [isSuccessful, setSuccessful] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n\n  const history = useHistory();\n\n  React.useEffect(() => {\n    if (localStorage.getItem('token')) {\n      const token = localStorage.getItem('token');\n      api.checkToken(token)\n      .then(res => res.data)\n      .then(data => {\n        if (data) {\n          setLoggedIn(true);\n          setEmail(data.email);\n          history.push('/');\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n    }\n  }, [history])\n\n  React.useEffect(() => {\n    if (loggedIn) {\n      api.getInitialCards()\n      .then((cards) => {\n        setCards(cards);\n      })\n      .catch(err => console.log(err))\n    }\n  }, [loggedIn])\n\n  React.useEffect(() => {\n    if (loggedIn) {\n      api.getUserInfo()\n      .then((userInfo) => {\n        setCurrentUser(userInfo);\n      })\n      .catch(err => console.log(err))\n    }\n  }, [loggedIn])\n\n  function handleAddPlaceSubmit(card) {\n    api.postCard(card)\n    .then((newCard) => {\n      setCards([newCard, ...cards])\n      closeAllPopups();\n    })\n    .catch(err => console.log(err))\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(like => like._id === currentUser._id);\n    api.changeLikeCardStatus(card, isLiked)\n    .then((newCard) => {\n      setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n    })\n    .catch(err => console.log(err));\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card)\n    .then(() => {\n      setCards((state) => state.filter((c) => c._id !== card._id));\n    })\n    .catch(err => console.log(err));\n  }\n\n  //открытие и закрытие попапов\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true);\n  }\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true);\n  }\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true);\n  }\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  function closeAllPopups() {\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setEditAvatarPopupOpen(false);\n    setTooltipOpen(false);\n\n    setSelectedCard({name: '', link: ''});\n  }\n\n  //обновление данных пользователя\n  function handleUpdateUser(info) {\n    api.setUserInfo(info)\n    .then((userInfo) => {\n      setCurrentUser(userInfo);\n      closeAllPopups();\n    })\n    .catch(err => console.log(err))\n  }\n\n  function handleUpdateAvatar(avatar) {\n    api.changeAvatar(avatar)\n    .then(avatar => {\n      setCurrentUser(avatar);\n      closeAllPopups();\n    })\n    .catch(err => console.log(err))\n  }\n\n  function handleRegister(email, password) {\n    api.register(email, password)\n    .then(res => {\n      if (res.data) {\n        setSuccessful(true);\n        setTooltipOpen(true);\n        history.push('/signin');\n      } else {\n        setSuccessful(false);\n        setTooltipOpen(true);\n      }\n    })\n    .catch((err) => {\n      console.log(err)\n      setSuccessful(false);\n      setTooltipOpen(true);\n    })\n  }\n\n  function handleLogin(email, password) {\n    api.login(email, password)\n    .then(data => {\n      if (data.token) {\n        localStorage.setItem('token', data.token);\n        setLoggedIn(true);\n        setEmail(email)\n        history.push('/');\n      }\n    })\n    .catch((err) => {\n      console.log(err);\n      setSuccessful(false);\n      setTooltipOpen(true);\n    })\n  }\n\n  function handleSignOut() {\n    localStorage.removeItem('token');\n    setLoggedIn(false);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page__content\">\n        <Header\n          loggedIn={loggedIn}\n          email={email}\n          onSignOut={handleSignOut}\n        />\n        <Switch>\n          <ProtectedRoute\n            exact path=\"/\"\n            loggedIn={loggedIn}\n            component={Main}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            cards={cards}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}\n          />\n          <Route path=\"/signin\">\n            {loggedIn ? <Redirect to=\"/\" /> : <Login onLogin={handleLogin} />}\n          </Route>\n          <Route path=\"/signup\">\n            {loggedIn ? <Redirect to=\"/\" /> : <Register onRegister={handleRegister} />}\n          </Route>\n          <Route>\n            {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/signin\" />}\n          </Route>\n        </Switch>\n        <Footer />\n      </div>\n      <InfoTooltip\n        isOpen={isTooltipOpen}\n        isSuccessful={isSuccessful}\n        onClose={closeAllPopups}\n      />\n      <EditProfilePopup\n        isOpen={isEditProfilePopupOpen}\n        onClose={closeAllPopups}\n        onUpdateUser={handleUpdateUser}\n      />\n      <EditAvatarPopup\n        isOpen={isEditAvatarPopupOpen}\n        onClose={closeAllPopups}\n        onUpdateAvatar={handleUpdateAvatar}\n      />\n      <AddPlacePopup\n        isOpen={isAddPlacePopupOpen}\n        onClose={closeAllPopups}\n        onAddPlace={handleAddPlaceSubmit}\n      />\n      <ImagePopup\n        card={selectedCard}\n        onClose={closeAllPopups}\n      />\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}